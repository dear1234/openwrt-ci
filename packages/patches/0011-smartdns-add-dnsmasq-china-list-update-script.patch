--- a/net/smartdns/Makefile
+++ b/net/smartdns/Makefile
@@ -29,7 +29,7 @@ define Package/smartdns
   SECTION:=net
   CATEGORY:=Network
   TITLE:=smartdns server
-  DEPENDS:=+libpthread +libopenssl
+  DEPENDS:=+libpthread +libopenssl +curl
   URL:=https://www.github.com/pymumu/smartdns/
 endef
 
@@ -47,13 +47,18 @@ define Package/smartdns/conffiles
 endef
 
 define Package/smartdns/install
-	$(INSTALL_DIR) $(1)/usr/sbin $(1)/etc/config $(1)/etc/init.d $(1)/etc/smartdns
+	$(INSTALL_DIR) $(1)/usr/sbin $(1)/etc/config $(1)/etc/init.d $(1)/etc/smartdns $(1)/usr/lib/smartdns
 	$(INSTALL_BIN) $(PKG_BUILD_DIR)/src/smartdns $(1)/usr/sbin/smartdns
 	$(INSTALL_BIN) $(PKG_BUILD_DIR)/package/openwrt/files/etc/init.d/smartdns $(1)/etc/init.d/smartdns
+	$(INSTALL_BIN) ./files/update_chinalist.sh $(1)/usr/lib/smartdns/update_chinalist.sh
 	$(INSTALL_CONF) $(PKG_BUILD_DIR)/package/openwrt/address.conf $(1)/etc/smartdns/address.conf
 	$(INSTALL_CONF) $(PKG_BUILD_DIR)/package/openwrt/blacklist-ip.conf $(1)/etc/smartdns/blacklist-ip.conf
 	$(INSTALL_CONF) $(PKG_BUILD_DIR)/package/openwrt/custom.conf $(1)/etc/smartdns/custom.conf
 	$(INSTALL_CONF) $(PKG_BUILD_DIR)/package/openwrt/files/etc/config/smartdns $(1)/etc/config/smartdns
+	$(INSTALL_CONF) ./files/nameserver-base.china.conf $(1)/etc/smartdns/nameserver-base.china.conf
+	$(INSTALL_CONF) ./files/nameserver-google.china.conf $(1)/etc/smartdns/nameserver-google.china.conf
+	$(INSTALL_CONF) ./files/nameserver-apple.china.conf $(1)/etc/smartdns/nameserver-apple.china.conf
+	$(INSTALL_CONF) ./files/bogus-nxdomain.china.conf $(1)/etc/smartdns/bogus-nxdomain.china.conf
 endef
 
 $(eval $(call BuildPackage,smartdns))
